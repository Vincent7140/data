export CC=$(which x86_64-conda-linux-gnu-gcc)
export CXX=$(which x86_64-conda-linux-gnu-g++)

export PATH="$CONDA_PREFIX/bin:$PATH"
export LD_LIBRARY_PATH="$CONDA_PREFIX/lib:$LD_LIBRARY_PATH"

cmake -DCMAKE_C_COMPILER=$CC -DCMAKE_CXX_COMPILER=$CXX ..





def build_colmap(args):
    extra_config_args = []
    if args.qt_path != "":
        extra_config_args.append("-DQt5_DIR={}".format(os.path.join(args.qt_path, "lib/cmake/Qt5")))
    
    # Modification pour boost
    if args.boost_path != "":
        extra_config_args.append("-DBOOST_ROOT={}".format(args.boost_path))
        extra_config_args.append("-DBOOST_LIBRARYDIR={}".format(args.boost_path))
    else:
        # Si aucune boost_path n'est pass√©e, on utilise CONDA_PREFIX
        if "CONDA_PREFIX" in os.environ:
            boost_root = os.environ["CONDA_PREFIX"]
            extra_config_args.append("-DBOOST_ROOT={}".format(boost_root))
            extra_config_args.append("-DBOOST_LIBRARYDIR={}".format(os.path.join(boost_root, "lib")))
            extra_config_args.append("-DBoost_NO_SYSTEM_PATHS=ON")
        else:
            print("Warning: Neither boost_path is set nor CONDA_PREFIX is defined.")

    if args.cuda_path != "":
        extra_config_args.append("-DCUDA_TOOLKIT_ROOT_DIR={}".format(args.cuda_path))

    if args.with_cuda:
        extra_config_args.append("-DCUDA_ENABLED=ON")
    else:
        extra_config_args.append("-DCUDA_ENABLED=OFF")

    if args.cuda_archs:
        extra_config_args.append("-DCUDA_ARCHS={}".format(args.cuda_archs))

    if args.with_opengl:
        extra_config_args.append("-DOPENGL_ENABLED=ON")
    else:
        extra_config_args.append("-DOPENGL_ENABLED=OFF")

    if args.with_tests:
        extra_config_args.append("-DTESTS_ENABLED=ON")
    else:
        extra_config_args.append("-DTESTS_ENABLED=OFF")

    if args.cgal_path:
        extra_config_args.append("-DCGAL_DIR={}".format(args.cgal_path))

    if PLATFORM_IS_WINDOWS:
        extra_config_args.append("-DCMAKE_CXX_FLAGS=/DGOOGLE_GLOG_DLL_DECL=")

    mkdir_if_not_exists(os.path.join(args.build_path, "colmap"))
    build_cmake_project(args, os.path.join(args.build_path, "colmap/__build__"),
                        extra_config_args=extra_config_args,
                        cmakelists_path=os.path.abspath(args.colmap_path))






--boost_path $CONDA_PREFIX
-DBoost_NO_SYSTEM_PATHS=ON
